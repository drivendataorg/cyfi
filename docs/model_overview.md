# About the model

CyFi was born out of the [Tick Tick BLoom](https://www.drivendata.org/competitions/143/tick-tick-bloom/) DrivenData competition.

### Why use machine learning

- Ground sampling is time intensive
- Indicators / correlates are visible from free, routinely collected data sources

## Data sources

CyFi relies on two data sources as input:

* Sentinel-2 satellite imagery
  *  Sentinel-2 is a wide-swath, high-resolution, multi-spectral imaging mission, supporting the monitoring of vegetation, soil and water cover, as well as observation of inland waterways and coastal areas. The Sentinel-2 Multispectral Instrument (MSI) samples 13 spectral bands: four bands at 10 metres, six bands at 20 metres and three bands at 60 metres spatial resolution. The mission provides a global coverage of the Earth's land surface every 5 days, making the data of great use in on-going studies.
  * Sentinel-2 data is accessed through the Planetary Computer
* Climate Research Data Package (CRDP) Land Cover Gridded Map
  * The CRDP land cover map (2020) classifies land surface into 22 classes, which have been defined using the United Nations Food and Agriculture Organization's Land Cover Classification System (LCCS). This map is based on data from the Medium Resolution Imaging Spectrometer (MERIS) sensor on board the polar-orbiting Envisat-1 environmental research satellite by the European Space Agency. This data comes from the CCI-LC database hosted by the ESA Climate Change Initiative's Land Cover project.

## Overview of the model

Each observation (or "sampling point") is a unique combination of date, latitude, and longitude.

```
input csv
```

To generate features for each observation, we:

- identify relevant Sentinel-2 tiles based on
  - a bounding box of 2,000m around the sampling point
  - a time range of 15 days prior to (and including) the sampling date
- select up to 15 of the least cloudy images
- filter the pixels in the bounding box to the water area using the [scene classification (SCL) band]()
- generate summary statistics (mean, max, min) and ratios (NDVI) using the imagery bands

We then look up the land cover value for each sampling point based on the static land cover map and add columns for ...

```
features csv
```

Cyanobacteria estimates are then generated by a [LightGBM model](https://github.com/microsoft/LightGBM), a gradient-boosted decision tree algorithm.

```
predictions csv
```